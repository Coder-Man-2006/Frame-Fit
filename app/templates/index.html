{% extends "layout.html" %}

{% block content %}
<h1>Webcam Test</h1>
<video id="webcam" autoplay playsinline></video>

<script>
    async function openWebcam() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            const webcamVideo = document.getElementById('webcam');
            webcamVideo.srcObject = stream;

            // Call the Python code execution function here
            executePythonCode();
        } catch (error) {
            console.error('Error accessing webcam:', error);
        }
    }

    function executePythonCode() {
        // Send a request to the backend to execute the Python code
        fetch('/run_python_code', { method: 'POST' })
            .then(response => response.text())
            .then(result => console.log(result))
            .catch(error => console.error('Error executing Python code:', error));
    }

    openWebcam();
</script>
{% endblock %}
